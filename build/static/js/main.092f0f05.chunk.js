(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,n){e.exports=n(31)},31:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n.n(a),o=n(22),i=n(0),c=n.n(i),u=n(14),l=n.n(u),s=n(7),d=n(11),p=n(23),h=n(19),f=n(18),m=Object(i.createContext)(null);function v(e){var t=e.children,n=Object(f.a)(e,["children"]),a=c.a.useState({}),r=Object(s.a)(a,2),o=r[0],u=r[1],l=Object(i.useCallback)(function(e){u(function(t){return Object(h.a)({},t,e)})},[u]);return c.a.createElement(m.Provider,{value:Object(h.a)({},o,n,{updateCtx:l})},c.a.cloneElement(t,Object(h.a)({},o,n,{updateCtx:l})))}var b,g,x=n(1),w=n(5),j=n(3),O=n(2),E=n(4),C=function(e){function t(e){var n;Object(x.a)(this,t),n=Object(j.a)(this,Object(O.a)(t).call(this,e));var a=e.rootElementType;return n.el=document.createElement(a),n}return Object(E.a)(t,e),Object(w.a)(t,[{key:"componentDidMount",value:function(){this.props.rootElement.append(this.el)}},{key:"componentWillUnmount",value:function(){this.props.rootElement.removeChild(this.el)}},{key:"render",value:function(){var e=this.props.children;return l.a.createPortal(e,this.el)}}]),t}(c.a.Component),y=n(8),M=function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],o=Object(i.useState)(null),c=Object(s.a)(o,2),u=c[0],l=c[1];return Object(i.useEffect)(function(){if(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,t.addEventListener("load",function(){r(!0)}),document.body.append(t),l(t)}},[e]),Object(i.useEffect)(function(){return function(){u&&document.body.removeChild(u)}},[u]),a},S=function(e){var t=Object(i.useState)(!1),n=Object(s.a)(t,2),a=n[0],r=n[1],o=M("//apps.8thwall.com/xrweb?appKey=".concat(e)),c=M("//cdn.8thwall.com/web/xrextras/xrextras.js");return Object(i.useEffect)(function(){o&&c&&r(!0)},[o,c]),a},R=function(e,t){var n=S(e),a=Object(i.useState)(null),r=Object(s.a)(a,2),o=r[0],c=r[1];return Object(i.useEffect)(function(){if(!o&&n&&t){var e=window.XRExtras;e.Loading.showLoading({onxrloaded:function(){var n=window.XR8;window.THREE=y,n.xrController().configure({disableWorldTracking:!1}),n.addCameraPipelineModules([n.GlTextureRenderer.pipelineModule(),n.XrController.pipelineModule(),e.AlmostThere.pipelineModule(),e.Loading.pipelineModule(),e.RuntimeError.pipelineModule()]),n.run({canvas:t}),c(n)}})}},[o,n,t]),o},k=function(){var e,t=Object(d.c)().gl,n=window.XR8,a={},r=0,o=t.domElement,c={position:"static",width:"100%",height:"100%",margin:"0px",padding:"0px",border:"0px",display:"block",top:"0px",left:"0px"},u={position:"fixed",width:"100%",height:"100%",margin:"0px",padding:"0px",border:"0px",display:"block",top:"0px",left:"0px"},l={width:"100%",height:"100%",margin:"0px",padding:"0px",border:"0px"},s=function t(){if(e){var n=window.innerWidth,i=window.innerHeight,l=n*devicePixelRatio,s=i*devicePixelRatio;if((0===r||180===r)&&l>s||(90===r||-90===r)&&s>l)window.requestAnimationFrame(t);else{var d=Math.max(l,s),p=Math.min(l,s),h=d/p,f=Math.max(a.w,a.h),m=Math.min(a.w,a.h),v=f,b=Math.round(f/h);if(b>m&&(b=m,v=Math.round(m*h)),(b>p||v>d)&&(b=p,v=d),l>s){var g=b;b=v,v=g}Object.assign(e.style,c),e.width=b,e.height=v,Object.assign(o.style,u),o.width=b,o.height=v,setTimeout(function(){return window.scrollTo(0,(window.scrollY+1)%2)},300)}}},p=function(e){var t=e.videoWidth,n=e.videoHeight;a.w=t,a.h=n};Object(i.useEffect)(function(){n.addCameraPipelineModule({name:"fullwindow-canvas",onUpdate:h,onStart:f,onDeviceOrientationChange:b,onCanvasSizeChange:v,onVideoSizeChange:m,onCameraStatusChange:g})});var h=function(){e.style.width===c.width&&e.style.height===c.height||s()},f=function(t){var n=t.canvas,a=t.orientation;r=a,(e=n).style=c,o.style=u;var i=document.getElementsByTagName("body")[0];Object.assign(i.style,l),i.appendChild(e),s()},m=function(e){var t=e.videoWidth,n=e.videoHeight;p({videoWidth:t,videoHeight:n}),s()},v=function(){s()},b=function(e){var t=e.orientation;r=t,s()},g=function(e){var t=e.status,n=e.video;"hasVideo"===t&&p(n)};return null},P=function(e){return function(t){var n=Object(p.a)({},t);return c.a.createElement(v,n,c.a.createElement(e,null))}}((b=function(e){var t=e.XR8,n=function(){var e=Object(i.useContext)(m);if(!e)throw new Error("No proper appStateContext provided");return e}().updateCtx;Object(i.useEffect)(function(){t&&n({XR8:t})},[t,n]);var a=Object(d.c)(),r=a.scene,o=a.gl,u=a.camera,l=Object(i.useState)(null),p=Object(s.a)(l,2),h=p[0],f=p[1],v=Object(i.useRef)(),b=Object(i.useRef)();o.domElement.id="xr-three",Object(d.b)(function(e){var t=e.gl,n=e.scene,a=e.camera;t.clearDepth(),t.render(n,a)},1),Object(i.useEffect)(function(){t.addCameraPipelineModule({name:"xrthree",onStart:x,onUpdate:w,onCanvasSizeChange:g,xrScene:j})});var g=function(e){var t=e.canvasWidth,n=e.canvasHeight;o.setSize(t,n),u.aspect=t/n,u.updateProjectionMatrix()},x=function(e){var a=e.canvasWidth,i=e.canvasHeight;o.autoClear=!1,o.setSize(a,i),o.antialias=!0,n({scene:r,camera:u,renderer:o}),t.XrController.updateCameraProjectionMatrix({origin:u.position,facing:u.quaternion})},w=function(e){var t=e.processCpuResult;u.updateProjectionMatrix();var n=t.reality;if(n&&n.intrinsics){for(var a=n.intrinsics,r=n.position,o=n.rotation,i=u.projectionMatrix.elements,c=0;c<16;c++)i[c]=a[c];u.projectionMatrixInverse.getInverse(u.projectionMatrix),u.setRotationFromQuaternion(o),u.position.copy(r)}},j=function(){return{scene:r,camera:u,renderer:o}};return c.a.createElement(d.a,{concurrent:!0,style:{width:"100%",height:"100%",position:"absolute",left:"0px",top:"0px",zIndex:100},shadowMap:!0,updateDefaultCamera:!1,camera:{position:[0,0,5],fov:60}},c.a.createElement("ambientLight",{intensity:.5}),c.a.createElement("spotLight",{intensity:.6,position:[20,10,10],angle:.2,penumbra:1,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,castShadow:!0}),c.a.createElement("group",null,c.a.createElement("mesh",{onPointerDown:function(e){return f(e.intersections[0].point)},receiveShadow:!0,position:[0,0,0],ref:v,"rotation-x":-Math.PI/2},c.a.createElement("planeGeometry",{attach:"geometry",args:[100,100,1,1]}),c.a.createElement("shadowMaterial",{opacity:.3})),c.a.createElement("mesh",{castShadow:!0,position:h,visible:!!h,ref:b,userData:{hello:"yop"}},c.a.createElement("boxGeometry",{args:[1,1,1]}),c.a.createElement("meshStandardMaterial",{color:"hotpink"}))),")",c.a.createElement(k,null))},g=function(e){var t=e.appKey,n=e.xr8Config,a=(e.updateCtx,Object(f.a)(e,["appKey","xr8Config","updateCtx"])),r=Object(i.useRef)(null),o=R(t,r.current);return c.a.createElement(i.Fragment,null,c.a.createElement(C,{rootElement:document.body},c.a.createElement("canvas",{ref:r})),o&&c.a.createElement(b,Object.assign({XR8:o,xr8Config:n},a)))},function(e){return c.a.createElement(g,e)})),z=function(e,t){console.log("onComplete has been triggered"),console.log("action =",e),console.log("result =",t),alert("Check your logs!")},T=function(e){return e?c.a.createElement(P,e):null};(function(){var e=Object(o.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("config.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,l.a.render(c.a.createElement(T,Object.assign({onComplete:z},n)),document.querySelector("#root"));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()}},[[25,2,1]]]);
//# sourceMappingURL=main.092f0f05.chunk.js.map